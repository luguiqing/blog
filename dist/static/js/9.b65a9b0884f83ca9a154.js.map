{"version":3,"sources":["webpack:///./src/pages/omsAddArticle.vue?78d5","webpack:///src/pages/omsAddArticle.vue","webpack:///./src/pages/omsAddArticle.vue?28ee","webpack:///./src/pages/omsAddArticle.vue","webpack:///./src/pages/omsAddArticle.vue?beaf"],"names":["content","__webpack_require__","module","i","locals","exports","omsAddArticle","this","id","articleId","_id","then","result","retcode","title","brief","retmsg","required","message","trigger","ajaxData","data","resetFields","isLogin","pages_omsAddArticle","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","formItem","label-width","rules","ruleValidate","label","prop","placeholder","maxlength","value","callback","$$v","$set","expression","_v","type","autosize","minRows","maxRows","size","slot","staticStyle","margin-right","on","click","$event","handleSubmit","margin-left","handleReset","html","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/9.b65a9b0884f83ca9a154.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.10@css-loader/index.js?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-52d0381c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./omsAddArticle.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js\")(\"fe786ba0\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.1.2@vue-style-loader!./node_modules/_css-loader@0.28.10@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-52d0381c\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/omsAddArticle.vue\n// module id = 7tKY\n// module chunks = 9","<style scoped lang=\"scss\">\r\n.omsAddArticl_container{\r\n    position: relative;\r\n    box-sizing: border-box;\r\n    -webkit-box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    width: 100%;\r\n    padding: 20px;\r\n    background-color: #fff;\r\n}\r\n</style>\r\n<template>\r\n    <div class=\"omsAddArticl_container\">\r\n        <Form :model=\"formItem\" :label-width=\"70\" :rules=\"ruleValidate\" ref=\"formValidate\">\r\n            <FormItem label=\"文章标题\" prop=\"title\">\r\n                <Input v-model=\"formItem.title\" placeholder=\"Enter title...\" :maxlength=\"50\"></Input>\r\n            </FormItem>\r\n            <FormItem label=\"文章简介\" prop=\"brief\">\r\n                <Input v-model=\"formItem.brief\" type=\"textarea\" :autosize=\"{minRows: 2,maxRows: 5}\" :maxlength=\"200\" placeholder=\"Enter brief...\"></Input>\r\n            </FormItem>\r\n            <FormItem label=\"对外开放\">\r\n                <i-switch v-model=\"formItem.status\" size=\"large\">\r\n                    <span slot=\"open\">On</span>\r\n                    <span slot=\"close\">Off</span>\r\n                </i-switch>\r\n            </FormItem>\r\n            <FormItem :label-width=\"1\">\r\n                <Button type=\"primary\" @click=\"handleSubmit('formValidate')\" style=\"margin-right: 10px;\">保存</Button>\r\n                <Button type=\"ghost\" @click=\"handleReset('formValidate')\" style=\"margin-left: 8px\">重置</Button>\r\n            </FormItem>\r\n        </Form>\r\n        <editor ref=\"editor\" :html=\"html\"></editor>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Storage from \"../utils/storage\"\r\nimport editor from \"../components/editor.vue\"\r\n\r\nexport default {\r\n    components: {\r\n        editor : editor\r\n    },\r\n    beforeMount() {\r\n        let self = this;\r\n        this.userInfo = Storage.getItem({ key : 'userInfo', type : 'object'});\r\n\r\n        if(this.$route.query && this.$route.query.id){\r\n            this.articleId = Number.parseInt(this.$route.query.id);\r\n            self.$ajax({\r\n                method  : 'post',\r\n                url     : '/Interface/getArticleDetail',\r\n                data    :  {\r\n                    articleId   :   self.articleId,\r\n                    userId      :   self.userInfo._id\r\n                }\r\n            }).then( result => {\r\n                switch(result.data.retcode){\r\n                    case 0:\r\n                        self.formItem.title = result.data.retdata.title;\r\n                        self.formItem.brief = result.data.retdata.brief;\r\n                        self.html = result.data.retdata.content;\r\n                        self.formItem.status = result.data.retdata.status === 0 ? false : true;\r\n                        self.$Message.success('加载文章内容成功');\r\n                        break;\r\n                    default:\r\n                        self.$Message.error(result.data.retmsg);\r\n                        break;\r\n                }\r\n            })\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            formItem: {\r\n                title: '',\r\n                brief: '',\r\n                status: true//文章是否对外开放\r\n            },\r\n            ruleValidate: {\r\n                title: [\r\n                    { required: true, message: 'The title cannot be empty', trigger: 'blur' }\r\n                ],\r\n                brief: [\r\n                    { required: true, message: 'The brief cannot be empty', trigger: 'blur' }\r\n                ]\r\n            },\r\n            articleId: null,\r\n            userInfo: null,\r\n            html : ''\r\n        }\r\n    },\r\n    methods: {\r\n        handleSubmit (name) {\r\n            let self = this;\r\n            //console.log(this.$refs['editor']['content'])\r\n            if(self.$refs['editor']['content'].length > 0){\r\n                self.$refs[name].validate((valid) => {\r\n                    if (valid) {\r\n                        let ajaxData = {\r\n                            title   :   self.formItem.title,\r\n                            brief   :   self.formItem.brief,\r\n                            status  :   self.formItem.status ? 1 : 0,\r\n                            content :   self.$refs['editor']['content'],\r\n                            userId  :   self.userInfo._id\r\n                        }\r\n                        if(self.articleId !== null){\r\n                            ajaxData.articleId = self.articleId;\r\n                        }\r\n                        self.$ajax({\r\n                            method  : 'post',\r\n                            url     : '/Interface/addArticle',\r\n                            data    :  ajaxData\r\n                        }).then( result => {\r\n                            switch(result.data.retcode){\r\n                                case 0:\r\n                                    console.log(result.data)\r\n                                    self.$Message.success('保存文章成功');\r\n                                    self.$router.push({name : 'omsUserArticleList'});\r\n                                    break;\r\n                                default:\r\n                                    self.$Message.error(result.data.retmsg);\r\n                                    break;\r\n                            }\r\n                        })\r\n                    } else {\r\n                        self.$Message.error('请完善信息！');\r\n                    }\r\n                })\r\n            }else{\r\n                self.$Message.error('请完善信息！');\r\n            }\r\n        },\r\n        handleReset (name) {\r\n            this.$refs[name].resetFields();\r\n            this.html = '';\r\n        }\r\n    },\r\n    computed: {\r\n        isLogin(){\r\n            return this.$store.getters.isLogin\r\n        }\r\n    },\r\n    watch: {\r\n        $route(newVal, oldVal){\r\n            if(newVal.query && newVal.query.id){\r\n\r\n            }else{\r\n                this.handleReset('formValidate')\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/omsAddArticle.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"omsAddArticl_container\"},[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formItem,\"label-width\":70,\"rules\":_vm.ruleValidate}},[_c('FormItem',{attrs:{\"label\":\"文章标题\",\"prop\":\"title\"}},[_c('Input',{attrs:{\"placeholder\":\"Enter title...\",\"maxlength\":50},model:{value:(_vm.formItem.title),callback:function ($$v) {_vm.$set(_vm.formItem, \"title\", $$v)},expression:\"formItem.title\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"文章简介\",\"prop\":\"brief\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 2,maxRows: 5},\"maxlength\":200,\"placeholder\":\"Enter brief...\"},model:{value:(_vm.formItem.brief),callback:function ($$v) {_vm.$set(_vm.formItem, \"brief\", $$v)},expression:\"formItem.brief\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"对外开放\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},model:{value:(_vm.formItem.status),callback:function ($$v) {_vm.$set(_vm.formItem, \"status\", $$v)},expression:\"formItem.status\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"On\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"Off\")])])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label-width\":1}},[_c('Button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit('formValidate')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},attrs:{\"type\":\"ghost\"},on:{\"click\":function($event){_vm.handleReset('formValidate')}}},[_vm._v(\"重置\")])],1)],1),_vm._v(\" \"),_c('editor',{ref:\"editor\",attrs:{\"html\":_vm.html}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-52d0381c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/omsAddArticle.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-52d0381c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./omsAddArticle.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./omsAddArticle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./omsAddArticle.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-52d0381c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./omsAddArticle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-52d0381c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/omsAddArticle.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.10@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.omsAddArticl_container[data-v-52d0381c] {\\n  position: relative;\\n  box-sizing: border-box;\\n  -webkit-box-sizing: border-box;\\n  -moz-box-sizing: border-box;\\n  width: 100%;\\n  padding: 20px;\\n  background-color: #fff;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"G:/projects/vue-cli-demo/gqBlog/src/pages/omsAddArticle.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,mBAAmB;EACnB,uBAAuB;EACvB,+BAA+B;EAC/B,4BAA4B;EAC5B,YAAY;EACZ,cAAc;EACd,uBAAuB;CACxB\",\"file\":\"omsAddArticle.vue\",\"sourcesContent\":[\"\\n.omsAddArticl_container[data-v-52d0381c] {\\n  position: relative;\\n  box-sizing: border-box;\\n  -webkit-box-sizing: border-box;\\n  -moz-box-sizing: border-box;\\n  width: 100%;\\n  padding: 20px;\\n  background-color: #fff;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.10@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-52d0381c\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/omsAddArticle.vue\n// module id = vwmW\n// module chunks = 9"],"sourceRoot":""}