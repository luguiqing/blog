{"version":3,"sources":["webpack:///src/pages/omsUserArticleList.vue","webpack:///./src/pages/omsUserArticleList.vue?5fa0","webpack:///./src/pages/omsUserArticleList.vue"],"names":["omsUserArticleList","myTable","this","_id","then","result","retcode","createDate","updateDate","retdata","retmsg","searchType","row","h","articleId","isLogin","userInfo","pages_omsUserArticleList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","searchList","columns","totalData","filter","loading","pageSize","_v","title","on","on-ok","deleteArticle","model","value","callback","$$v","modalStatus","expression","type","_s","articleTitle","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2IAsCAA,uBAIAC,EAAA,gCAGAC,wBAEA,WACA,2DAGAC,OALAC,KAAA,SAAAC,qBAOA,SACAC,cACA,oFAIAC,0DAGAC,kCAGAC,QACA,MACA,gCACAC,kCAMAR,8BAKA,WAEA,eAEA,aAGA,6CAEAS,OACA,YAGA,iFASA,SACA,gBAEA,UAEA,WACA,kBAEA,UAEA,WACA,uBAEA,UAEA,WACA,uBAEA,UAEA,SACA,kBACA,8BAEAC,iDAOA,SACA,gBAMA,SACA,sCAEAA,iCAIA,UACAC,EAAA,sBAGA,eAEA,4BAGA,6EAIA,UAGA,MAAAA,EAAA,sBAGA,aAEA,4CAGA,mBACA,mBACA,SAKA,wBAIA,YACA,kBAEA,6CAIAX,wBAEA,WACA,sDAEAC,mBAEAW,aANAV,KAAA,SAAAC,iBAQAC,cACA,4BACAI,oFAGA,KAGA,MACA,gCACAA,qEAQAK,wDAGAC,YCvNAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAjB,KAAakB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,iCAA2CF,EAAA,WAAgBG,OAAOC,WAAAP,EAAAO,WAAAC,QAAAR,EAAAQ,QAAAC,UAAAT,EAAAS,UAAAC,OAAAV,EAAAU,OAAAC,QAAAX,EAAAW,QAAAC,SAAA,MAAqIZ,EAAAa,GAAA,KAAAV,EAAA,SAA0BG,OAAOQ,MAAA,MAAaC,IAAKC,QAAAhB,EAAAiB,eAA0BC,OAAQC,MAAAnB,EAAA,YAAAoB,SAAA,SAAAC,GAAiDrB,EAAAsB,YAAAD,GAAoBE,WAAA,iBAA2BpB,EAAA,QAAaE,YAAA,YAAAC,OAA+BkB,KAAA,qBAA0BxB,EAAAa,GAAA,KAAAV,EAAA,KAAsBE,YAAA,iBAA2BL,EAAAa,GAAA,UAAAb,EAAAyB,GAAAzB,EAAA0B,cAAA,iBAE5kBC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAjD,EACAiB,GATA,EAVA,SAAAiC,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/8.abd07c042b507d8fcd9b.js","sourcesContent":["<style scoped lang=\"scss\">\r\n.omsUserArticleList_container{\r\n    position: relative;\r\n    box-sizing: border-box;\r\n    -webkit-box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    width: 100%;\r\n    padding: 20px;\r\n    background-color: #fff;\r\n}\r\n.warn_icon{\r\n    display: inline-block;\r\n    color: #ff9900;\r\n    font-size: 24px;\r\n    vertical-align: middle;\r\n}\r\n.model_conten{\r\n    display: inline-block;\r\n    margin-left: 10px;\r\n}\r\n</style>\r\n<template>\r\n<div class=\"omsUserArticleList_container\">\r\n    <myTable :searchList=\"searchList\" :columns=\"columns\" :totalData=\"totalData\" :filter=\"filter\" :loading=\"loading\" :pageSize=\"10\"></myTable>\r\n    <Modal\r\n        v-model=\"modalStatus\"\r\n        title=\"操作\"\r\n        @on-ok=\"deleteArticle\">\r\n        <Icon type=\"ios-information\" class=\"warn_icon\"></Icon>\r\n        <p class=\"model_conten\">确定删除文章\"{{articleTitle}}\"?</p>\r\n    </Modal>\r\n</div>\r\n</template>\r\n<script>\r\nimport Storage from \"../utils/storage\"\r\nimport myTable from '../components/myTable.vue'\r\nimport Util from '../utils/util'\r\n\r\nexport default {\r\n    components: {\r\n        myTable : myTable\r\n    },\r\n    beforeMount() {\r\n        let self = this;\r\n\r\n        this.$ajax({\r\n            method  : 'post',\r\n            url     : '/Interface/getArticleListById',\r\n            data    :  {\r\n                userId  :   this.userInfo._id\r\n            }\r\n        }).then( result => {\r\n            self.loading = false;\r\n            switch(result.data.retcode){\r\n                case 0:\r\n                    //console.log(result.data)\r\n                    result.data.retdata.forEach( (item, index) => {\r\n                        if(item.createDate){\r\n                            item.createDate = Util.formatDate(item.createDate);\r\n                        }\r\n                        if(item.updateDate){\r\n                            item.updateDate = Util.formatDate(item.updateDate)\r\n                        }\r\n                    });\r\n                    self.totalData = result.data.retdata;\r\n                    break;\r\n                default:\r\n                    self.$Message.error(result.data.retmsg);\r\n                    break;\r\n            }\r\n        })\r\n    },\r\n    data(){\r\n        let self = this;\r\n        return {\r\n            //table -- props\r\n            searchList: [\r\n                {\r\n                    name :  \"标题\",\r\n                    value:  \"title\"\r\n                },\r\n                {\r\n                    name :  \"发布时间\",\r\n                    value:  \"createDate\"\r\n                }\r\n            ],\r\n            filter: function(data, searchType, searchValue){\r\n                switch(searchType){\r\n                    case 'title':\r\n                        return data[searchType].indexOf(searchValue) > -1 ? true : false;\r\n                        break;\r\n                    case 'createDate':\r\n                        return data[searchType].indexOf(searchValue) > -1 ? true : false;\r\n                        break;\r\n                }\r\n            },\r\n            loading: true,//数据加载中\r\n            totalData: [],\r\n            columns: [\r\n                {\r\n                    title: 'Id',\r\n                    key: '_id',\r\n                    sortable: true\r\n                },\r\n                {\r\n                    title: '文章标题',\r\n                    key: 'title',\r\n                    ellipsis: true\r\n                },\r\n                {\r\n                    title: '发布时间',\r\n                    key: 'createDate',\r\n                    ellipsis: true\r\n                },\r\n                {\r\n                    title: '修改时间',\r\n                    key: 'updateDate',\r\n                    ellipsis: true\r\n                },\r\n                {\r\n                    title: '标签',\r\n                    key: 'tagId',\r\n                    ellipsis: true,\r\n                    render: (h, params) => {\r\n                        const row = params.row;\r\n                        if(row['tagId'].length > 0){\r\n                            //todo,暂时没写标签\r\n                        }else{\r\n                            return h('div', {\r\n                                props: {\r\n                                    color: '#333'\r\n                                }\r\n                            }, '未分类');\r\n                        }\r\n\r\n                    }\r\n                },\r\n                {\r\n                    title: '操作',\r\n                    key: 'action',\r\n                    render: (h, params) => {\r\n                        const row =params.row\r\n                        return h('div', {\r\n                            props: {\r\n                                color: '#333'\r\n                            }\r\n                        }, [\r\n                            h('Button', {\r\n                                props: {\r\n                                    type: 'primary',\r\n                                    size: 'small'\r\n                                },\r\n                                style:{\r\n                                    marginRight: '5px'\r\n                                },\r\n                                on: {\r\n                                    click: function(){\r\n                                        //console.log(row['_id']),文章id\r\n                                        self.$router.push({name : 'omsAddArticle', query : {id : row['_id']}})\r\n                                    }\r\n                                }\r\n                            }, '修改'),\r\n                            h('Button', {\r\n                                props: {\r\n                                    type: 'error',\r\n                                    size: 'small'\r\n                                },\r\n                                on: {\r\n                                    click: function(){\r\n                                        self.articleId = row['_id'];\r\n                                        self.modalStatus = true;\r\n                                        self.articleTitle = row['title'];\r\n                                    }\r\n                                }\r\n                            }, '删除')\r\n                        ]);\r\n\r\n                    }\r\n                }\r\n            ],\r\n            modalStatus: false,\r\n            articleId: null,\r\n            articleTitle: ''\r\n        }\r\n    },\r\n    methods: {\r\n        deleteArticle(){\r\n            let self = this;\r\n            this.$ajax({\r\n                method  : 'post',\r\n                url     : '/Interface/deleteArticle',\r\n                data    :  {\r\n                    userId    :   this.userInfo._id,\r\n                    articleId :   this.articleId\r\n                }\r\n            }).then( result => {\r\n                switch(result.data.retcode){\r\n                    case 0:\r\n                        self.$Message.success(result.data.retmsg);\r\n                        self.totalData.forEach((item, index) => {\r\n                            if(item._id === self.articleId){\r\n                                self.totalData.splice(index,1);\r\n                            }\r\n                        })\r\n                        break;\r\n                    default:\r\n                        self.$Message.error(result.data.retmsg);\r\n                        break;\r\n                }\r\n            })\r\n        }\r\n    },\r\n    computed: {\r\n        isLogin(){\r\n            return this.$store.getters.isLogin\r\n        },\r\n        userInfo(){\r\n            return this.$store.getters.userInfo\r\n        }\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/pages/omsUserArticleList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"omsUserArticleList_container\"},[_c('myTable',{attrs:{\"searchList\":_vm.searchList,\"columns\":_vm.columns,\"totalData\":_vm.totalData,\"filter\":_vm.filter,\"loading\":_vm.loading,\"pageSize\":10}}),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"操作\"},on:{\"on-ok\":_vm.deleteArticle},model:{value:(_vm.modalStatus),callback:function ($$v) {_vm.modalStatus=$$v},expression:\"modalStatus\"}},[_c('Icon',{staticClass:\"warn_icon\",attrs:{\"type\":\"ios-information\"}}),_vm._v(\" \"),_c('p',{staticClass:\"model_conten\"},[_vm._v(\"确定删除文章\\\"\"+_vm._s(_vm.articleTitle)+\"\\\"?\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-8b7c51f4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/omsUserArticleList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8b7c51f4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./omsUserArticleList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./omsUserArticleList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./omsUserArticleList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8b7c51f4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./omsUserArticleList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-8b7c51f4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/omsUserArticleList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}