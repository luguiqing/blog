{"version":3,"sources":["webpack:///./src/pages/omsAllUserList.vue?74c2","webpack:///src/pages/omsAllUserList.vue","webpack:///./src/pages/omsAllUserList.vue?935c","webpack:///./src/pages/omsAllUserList.vue","webpack:///./src/utils/util.js","webpack:///./src/pages/omsAllUserList.vue?f10f"],"names":["content","__webpack_require__","module","i","locals","exports","omsAllUserList","myTable","this","_id","then","result","retcode","createDate","updateDate","retdata","retmsg","searchType","row","h","status","modalClickType","userId","isLogin","userInfo","pages_omsAllUserList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","searchList","columns","totalData","filter","loading","pageSize","_v","title","on","on-ok","confirmModal","model","value","callback","$$v","modalStatus","expression","type","_s","userName","_e","userStatus","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","date","year","month","day","hour","minute","second","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","map","formatNumber","join","num","toString","push","version","sources","names","mappings","file","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/5.5f6289cec18e8878eb0e.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.10@css-loader/index.js?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4bf0bd18\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./omsAllUserList.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js\")(\"60fa6bcf\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/_vue-style-loader@3.1.2@vue-style-loader!./node_modules/_css-loader@0.28.10@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4bf0bd18\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/omsAllUserList.vue\n// module id = Pr0K\n// module chunks = 5","<style scoped lang=\"scss\">\r\n.omsUserArticleList_container{\r\n    position: relative;\r\n    box-sizing: border-box;\r\n    -webkit-box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    width: 100%;\r\n    padding: 20px;\r\n    background-color: #fff;\r\n}\r\n.warn_icon{\r\n    display: inline-block;\r\n    color: #ff9900;\r\n    font-size: 24px;\r\n    vertical-align: middle;\r\n}\r\n.model_conten{\r\n    display: inline-block;\r\n    margin-left: 10px;\r\n}\r\n</style>\r\n<template>\r\n<div class=\"omsUserArticleList_container\">\r\n    <myTable :searchList=\"searchList\" :columns=\"columns\" :totalData=\"totalData\" :filter=\"filter\" :loading=\"loading\" :pageSize=\"10\"></myTable>\r\n    <Modal\r\n        v-model=\"modalStatus\"\r\n        title=\"操作\"\r\n        @on-ok=\"confirmModal\">\r\n        <Icon type=\"ios-information\" class=\"warn_icon\"></Icon>\r\n        <p v-if=\"modalClickType == 'deleteUser'\" class=\"model_conten\">确定删除用户\"{{userName}}\"?</p>\r\n        <p v-if=\"modalClickType == 'controlStatus'\" class=\"model_conten\">确定{{userStatus == '1' ? '冻结' : '解冻'}}用户“{{userName}}”?</p>\r\n    </Modal>\r\n</div>\r\n</template>\r\n<script>\r\nimport Storage from \"../utils/storage\"\r\nimport myTable from '../components/myTable.vue'\r\nimport Util from '../utils/util'\r\n\r\nexport default {\r\n    components: {\r\n        myTable : myTable\r\n    },\r\n    beforeMount() {\r\n        let self = this;\r\n\r\n        this.$ajax({\r\n            method  : 'post',\r\n            url     : '/Interface/getUserList',\r\n            data    :  {\r\n                userId  :   this.userInfo._id\r\n            }\r\n        }).then( result => {\r\n            self.loading = false;\r\n            switch(result.data.retcode){\r\n                case 0:\r\n                    //console.log(result.data)\r\n                    result.data.retdata.forEach( (item, index) => {\r\n                        if(item.createDate){\r\n                            item.createDate = Util.formatDate(item.createDate);\r\n                        }\r\n                        if(item.updateDate){\r\n                            item.updateDate = Util.formatDate(item.updateDate)\r\n                        }\r\n                    });\r\n                    self.totalData = result.data.retdata;\r\n                    break;\r\n                default:\r\n                    self.$Message.error(result.data.retmsg);\r\n                    break;\r\n            }\r\n        })\r\n    },\r\n    data(){\r\n        let self = this;\r\n        return {\r\n            //table -- props\r\n            searchList: [\r\n                {\r\n                    name :  \"用户\",\r\n                    value:  \"userName\"\r\n                },\r\n                {\r\n                    name :  \"注册时间\",\r\n                    value:  \"createDate\"\r\n                }\r\n            ],\r\n            filter: function(data, searchType, searchValue){\r\n                switch(searchType){\r\n                    case 'userName':\r\n                        return data[searchType].indexOf(searchValue) > -1 ? true : false;\r\n                        break;\r\n                    case 'createDate':\r\n                        return data[searchType].indexOf(searchValue) > -1 ? true : false;\r\n                        break;\r\n                }\r\n            },\r\n            loading: true,//数据加载中\r\n            totalData: [],\r\n            columns: [\r\n                {\r\n                    title: 'Id',\r\n                    key: '_id',\r\n                    sortable: true\r\n                },\r\n                {\r\n                    title: '用户',\r\n                    key: 'userName',\r\n                    ellipsis: true\r\n                },\r\n                {\r\n                    title: '注册时间',\r\n                    key: 'createDate',\r\n                    ellipsis: true\r\n                },\r\n                {\r\n                    title: '操作',\r\n                    key: 'action',\r\n                    render: (h, params) => {\r\n                        const row =params.row\r\n                        return h('div', {\r\n                            props: {\r\n                                color: '#333'\r\n                            }\r\n                        }, [\r\n                            h('Button', {\r\n                                props: {\r\n                                    type: 'primary',\r\n                                    size: 'small'\r\n                                },\r\n                                style:{\r\n                                    marginRight: '5px'\r\n                                },\r\n                                on: {\r\n                                    click: function(){\r\n                                        self.userId = row['_id'];\r\n                                        self.modalClickType = \"controlStatus\";\r\n                                        self.modalStatus = true;\r\n                                        self.userName = row['userName'];\r\n                                        self.userStatus = row['status'];\r\n                                    }\r\n                                }\r\n                            }, (row.status == '1' ? '冻结' : '解冻')),\r\n                            h('Button', {\r\n                                props: {\r\n                                    type: 'error',\r\n                                    size: 'small'\r\n                                },\r\n                                on: {\r\n                                    click: function(){\r\n                                        self.userId = row['_id'];\r\n                                        self.modalClickType = \"deleteUser\"\r\n                                        self.modalStatus = true;\r\n                                        self.userName = row['userName'];\r\n                                    }\r\n                                }\r\n                            }, '删除')\r\n                        ]);\r\n\r\n                    }\r\n                }\r\n            ],\r\n            modalStatus: false,\r\n            modalClickType: '',\r\n            userId: null,\r\n            userName: '',\r\n            userStatus: '2',//1为正常，2为冻结\r\n        }\r\n    },\r\n    methods: {\r\n        confirmModal(){\r\n            let self = this;\r\n            let status = this.userStatus == '1' ?  '2' : '1';\r\n            switch(self.modalClickType){\r\n                case 'controlStatus':\r\n                   this.$ajax({\r\n                        method  : 'post',\r\n                        url     : '/Interface/changeUserStatus',\r\n                        data    :  {\r\n                            adminId    :   this.userInfo._id,\r\n                            userId     :   this.userId,\r\n                            status     :   status\r\n                        }\r\n                    }).then( result => {\r\n                        switch(result.data.retcode){\r\n                            case 0:\r\n                                self.$Message.success(result.data.retmsg);\r\n                                self.totalData.forEach((item, index) => {\r\n                                    if(item._id === self.userId){\r\n                                        self.$set(item, 'status', status)\r\n                                    }\r\n                                })\r\n                                break;\r\n                            default:\r\n                                self.$Message.error(result.data.retmsg);\r\n                                break;\r\n                        }\r\n                    })\r\n                break;\r\n                case 'deleteUser':\r\n                    this.$ajax({\r\n                        method  : 'post',\r\n                        url     : '/Interface/forceDeleteUser',\r\n                        data    :  {\r\n                            adminId     :   this.userInfo._id,\r\n                            userId      :   this.userId\r\n                        }\r\n                    }).then( result => {\r\n                        switch(result.data.retcode){\r\n                            case 0:\r\n                                self.$Message.success(result.data.retmsg);\r\n                                self.totalData.forEach((item, index) => {\r\n                                    if(item._id === self.userId){\r\n                                        self.totalData.splice(index,1);\r\n                                    }\r\n                                })\r\n                                break;\r\n                            default:\r\n                                self.$Message.error(result.data.retmsg);\r\n                                break;\r\n                        }\r\n                    })\r\n                    break;\r\n\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        isLogin(){\r\n            return this.$store.getters.isLogin\r\n        },\r\n        userInfo(){\r\n            return this.$store.getters.userInfo\r\n        }\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/pages/omsAllUserList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"omsUserArticleList_container\"},[_c('myTable',{attrs:{\"searchList\":_vm.searchList,\"columns\":_vm.columns,\"totalData\":_vm.totalData,\"filter\":_vm.filter,\"loading\":_vm.loading,\"pageSize\":10}}),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"操作\"},on:{\"on-ok\":_vm.confirmModal},model:{value:(_vm.modalStatus),callback:function ($$v) {_vm.modalStatus=$$v},expression:\"modalStatus\"}},[_c('Icon',{staticClass:\"warn_icon\",attrs:{\"type\":\"ios-information\"}}),_vm._v(\" \"),(_vm.modalClickType == 'deleteUser')?_c('p',{staticClass:\"model_conten\"},[_vm._v(\"确定删除用户\\\"\"+_vm._s(_vm.userName)+\"\\\"?\")]):_vm._e(),_vm._v(\" \"),(_vm.modalClickType == 'controlStatus')?_c('p',{staticClass:\"model_conten\"},[_vm._v(\"确定\"+_vm._s(_vm.userStatus == '1' ? '冻结' : '解冻')+\"用户“\"+_vm._s(_vm.userName)+\"”?\")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-4bf0bd18\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/omsAllUserList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4bf0bd18\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./omsAllUserList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./omsAllUserList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./omsAllUserList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4bf0bd18\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./omsAllUserList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4bf0bd18\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/omsAllUserList.vue\n// module id = null\n// module chunks = ","export default class {\r\n\tstatic formatDate(date) {\r\n\t\tdate = new Date(date);\r\n\t\tlet year, month, day, hour, minute, second;\r\n\t\tyear = date.getFullYear();\r\n\t\tmonth = date.getMonth() + 1;\r\n\t\tday = date.getDate();\r\n\t\thour = date.getHours();\r\n\t\tminute = date.getMinutes();\r\n\t\tsecond = date.getSeconds();\r\n\r\n\t\treturn [year, month, day].map(formatNumber).join('-') + ' ' + [hour, minute, second].map(formatNumber).join(':');\r\n\t}\r\n}\r\n\r\nfunction formatNumber(num){\r\n\tnum = num.toString();\r\n\treturn num[1] ? num : '0'+num;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/util.js","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.10@css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.omsUserArticleList_container[data-v-4bf0bd18] {\\n  position: relative;\\n  box-sizing: border-box;\\n  -webkit-box-sizing: border-box;\\n  -moz-box-sizing: border-box;\\n  width: 100%;\\n  padding: 20px;\\n  background-color: #fff;\\n}\\n.warn_icon[data-v-4bf0bd18] {\\n  display: inline-block;\\n  color: #ff9900;\\n  font-size: 24px;\\n  vertical-align: middle;\\n}\\n.model_conten[data-v-4bf0bd18] {\\n  display: inline-block;\\n  margin-left: 10px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"G:/projects/vue-cli-demo/gqBlog/src/pages/omsAllUserList.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,mBAAmB;EACnB,uBAAuB;EACvB,+BAA+B;EAC/B,4BAA4B;EAC5B,YAAY;EACZ,cAAc;EACd,uBAAuB;CACxB;AACD;EACE,sBAAsB;EACtB,eAAe;EACf,gBAAgB;EAChB,uBAAuB;CACxB;AACD;EACE,sBAAsB;EACtB,kBAAkB;CACnB\",\"file\":\"omsAllUserList.vue\",\"sourcesContent\":[\"\\n.omsUserArticleList_container[data-v-4bf0bd18] {\\n  position: relative;\\n  box-sizing: border-box;\\n  -webkit-box-sizing: border-box;\\n  -moz-box-sizing: border-box;\\n  width: 100%;\\n  padding: 20px;\\n  background-color: #fff;\\n}\\n.warn_icon[data-v-4bf0bd18] {\\n  display: inline-block;\\n  color: #ff9900;\\n  font-size: 24px;\\n  vertical-align: middle;\\n}\\n.model_conten[data-v-4bf0bd18] {\\n  display: inline-block;\\n  margin-left: 10px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.10@css-loader?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-4bf0bd18\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js?{\"sourceMap\":true}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/omsAllUserList.vue\n// module id = pjPs\n// module chunks = 5"],"sourceRoot":""}