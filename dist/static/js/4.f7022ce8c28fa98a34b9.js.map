{"version":3,"sources":["webpack:///src/pages/omsAddArticle.vue","webpack:///./src/pages/omsAddArticle.vue?28ee","webpack:///./src/pages/omsAddArticle.vue","webpack:///./src/utils/ImageResize.js","webpack:///src/components/editor.vue","webpack:///./src/components/editor.vue?54b1","webpack:///./src/components/editor.vue"],"names":["omsAddArticle","this","id","articleId","_id","then","result","retcode","title","brief","content","retmsg","required","message","trigger","ajaxData","data","resetFields","isLogin","pages_omsAddArticle","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","model","formItem","label-width","rules","ruleValidate","label","prop","placeholder","maxlength","value","callback","$$v","$set","expression","_v","type","autosize","minRows","maxRows","size","slot","staticStyle","margin-right","on","click","$event","handleSubmit","margin-left","handleReset","html","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","ImageResize_ImageResize","ImageResize","quill","options","arguments","length","undefined","classCallCheck_default","handleClick","bind","handleMousedown","handleMouseup","handleDrag","checkImage","boxes","document","execCommand","root","addEventListener","createClass_default","key","evt","target","tagName","toUpperCase","img","hide","show","showResizers","showSizeDisplay","rect","getBoundingClientRect","positionBoxes","positionSizeDisplay","hideResizers","hideSizeDisplay","setUserSelect","addBox","removeEventListener","setCursor","forEach","box","body","removeChild","dragBox","dragStartX","preDragWidth","cursor","createElement","styles","position","height","width","backgroundColor","border","boxSizing","opacity","extend","style","handleStyles","appendChild","push","destination","_len","sources","Array","_key","source","hasOwnProperty","_this","left","top","pos","idx","Math","round","window","pageYOffset","pageXOffset","clientX","naturalWidth","_this2","documentElement","el","displaySize","display","font","padding","textAlign","color","displayStyles","getCurrentSize","innerHTML","join","dispRect","naturalHeight","quill_default","a","register","editor","String","header","list","script","indent","direction","background","align","newVal","components_editor","editorOption","ready","onEditorReady","change","onEditorChange"],"mappings":"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","file":"static/js/4.f7022ce8c28fa98a34b9.js","sourcesContent":["<style scoped lang=\"scss\">\r\n.omsAddArticl_container{\r\n    position: relative;\r\n    box-sizing: border-box;\r\n    -webkit-box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    width: 100%;\r\n    padding: 20px;\r\n    background-color: #fff;\r\n}\r\n</style>\r\n<template>\r\n    <div class=\"omsAddArticl_container\">\r\n        <Form :model=\"formItem\" :label-width=\"70\" :rules=\"ruleValidate\" ref=\"formValidate\">\r\n            <FormItem label=\"文章标题\" prop=\"title\">\r\n                <Input v-model=\"formItem.title\" placeholder=\"Enter title...\" :maxlength=\"50\"></Input>\r\n            </FormItem>\r\n            <FormItem label=\"文章简介\" prop=\"brief\">\r\n                <Input v-model=\"formItem.brief\" type=\"textarea\" :autosize=\"{minRows: 2,maxRows: 5}\" :maxlength=\"200\" placeholder=\"Enter brief...\"></Input>\r\n            </FormItem>\r\n            <FormItem label=\"对外开放\">\r\n                <i-switch v-model=\"formItem.status\" size=\"large\">\r\n                    <span slot=\"open\">On</span>\r\n                    <span slot=\"close\">Off</span>\r\n                </i-switch>\r\n            </FormItem>\r\n            <FormItem :label-width=\"1\">\r\n                <Button type=\"primary\" @click=\"handleSubmit('formValidate')\" style=\"margin-right: 10px;\">保存</Button>\r\n                <Button type=\"ghost\" @click=\"handleReset('formValidate')\" style=\"margin-left: 8px\">重置</Button>\r\n            </FormItem>\r\n        </Form>\r\n        <editor ref=\"editor\" :html=\"html\"></editor>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Storage from \"../utils/storage\"\r\nimport editor from \"../components/editor.vue\"\r\n\r\nexport default {\r\n    components: {\r\n        editor : editor\r\n    },\r\n    beforeMount() {\r\n        let self = this;\r\n        this.userInfo = Storage.getItem({ key : 'userInfo', type : 'object'});\r\n\r\n        if(this.$route.query && this.$route.query.id){\r\n            this.articleId = Number.parseInt(this.$route.query.id);\r\n            self.$ajax({\r\n                method  : 'post',\r\n                url     : '/Interface/getArticleDetail',\r\n                data    :  {\r\n                    articleId   :   self.articleId,\r\n                    userId      :   self.userInfo._id\r\n                }\r\n            }).then( result => {\r\n                switch(result.data.retcode){\r\n                    case 0:\r\n                        self.formItem.title = result.data.retdata.title;\r\n                        self.formItem.brief = result.data.retdata.brief;\r\n                        self.html = result.data.retdata.content;\r\n                        self.formItem.status = result.data.retdata.status === 0 ? false : true;\r\n                        self.$Message.success('加载文章内容成功');\r\n                        break;\r\n                    default:\r\n                        self.$Message.error(result.data.retmsg);\r\n                        break;\r\n                }\r\n            })\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            formItem: {\r\n                title: '',\r\n                brief: '',\r\n                status: true//文章是否对外开放\r\n            },\r\n            ruleValidate: {\r\n                title: [\r\n                    { required: true, message: 'The title cannot be empty', trigger: 'blur' }\r\n                ],\r\n                brief: [\r\n                    { required: true, message: 'The brief cannot be empty', trigger: 'blur' }\r\n                ]\r\n            },\r\n            articleId: null,\r\n            userInfo: null,\r\n            html : ''\r\n        }\r\n    },\r\n    methods: {\r\n        handleSubmit (name) {\r\n            let self = this;\r\n            //console.log(this.$refs['editor']['content'])\r\n            if(self.$refs['editor']['content'].length > 0){\r\n                self.$refs[name].validate((valid) => {\r\n                    if (valid) {\r\n                        let ajaxData = {\r\n                            title   :   self.formItem.title,\r\n                            brief   :   self.formItem.brief,\r\n                            status  :   self.formItem.status ? 1 : 0,\r\n                            content :   self.$refs['editor']['content'],\r\n                            userId  :   self.userInfo._id\r\n                        }\r\n                        if(self.articleId !== null){\r\n                            ajaxData.articleId = self.articleId;\r\n                        }\r\n                        self.$ajax({\r\n                            method  : 'post',\r\n                            url     : '/Interface/addArticle',\r\n                            data    :  ajaxData\r\n                        }).then( result => {\r\n                            switch(result.data.retcode){\r\n                                case 0:\r\n                                    console.log(result.data)\r\n                                    self.$Message.success('保存文章成功');\r\n                                    self.$router.push({name : 'omsUserArticleList'});\r\n                                    break;\r\n                                default:\r\n                                    self.$Message.error(result.data.retmsg);\r\n                                    break;\r\n                            }\r\n                        })\r\n                    } else {\r\n                        self.$Message.error('请完善信息！');\r\n                    }\r\n                })\r\n            }else{\r\n                self.$Message.error('请完善信息！');\r\n            }\r\n        },\r\n        handleReset (name) {\r\n            this.$refs[name].resetFields();\r\n            this.html = '';\r\n        }\r\n    },\r\n    computed: {\r\n        isLogin(){\r\n            return this.$store.getters.isLogin\r\n        }\r\n    },\r\n    watch: {\r\n        $route(newVal, oldVal){\r\n            if(newVal.query && newVal.query.id){\r\n\r\n            }else{\r\n                this.handleReset('formValidate')\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/omsAddArticle.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"omsAddArticl_container\"},[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formItem,\"label-width\":70,\"rules\":_vm.ruleValidate}},[_c('FormItem',{attrs:{\"label\":\"文章标题\",\"prop\":\"title\"}},[_c('Input',{attrs:{\"placeholder\":\"Enter title...\",\"maxlength\":50},model:{value:(_vm.formItem.title),callback:function ($$v) {_vm.$set(_vm.formItem, \"title\", $$v)},expression:\"formItem.title\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"文章简介\",\"prop\":\"brief\"}},[_c('Input',{attrs:{\"type\":\"textarea\",\"autosize\":{minRows: 2,maxRows: 5},\"maxlength\":200,\"placeholder\":\"Enter brief...\"},model:{value:(_vm.formItem.brief),callback:function ($$v) {_vm.$set(_vm.formItem, \"brief\", $$v)},expression:\"formItem.brief\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"对外开放\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},model:{value:(_vm.formItem.status),callback:function ($$v) {_vm.$set(_vm.formItem, \"status\", $$v)},expression:\"formItem.status\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"On\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"Off\")])])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label-width\":1}},[_c('Button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit('formValidate')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\"},attrs:{\"type\":\"ghost\"},on:{\"click\":function($event){_vm.handleReset('formValidate')}}},[_vm._v(\"重置\")])],1)],1),_vm._v(\" \"),_c('editor',{ref:\"editor\",attrs:{\"html\":_vm.html}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-52d0381c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/pages/omsAddArticle.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-52d0381c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./omsAddArticle.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./omsAddArticle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./omsAddArticle.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-52d0381c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./omsAddArticle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-52d0381c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/omsAddArticle.vue\n// module id = null\n// module chunks = ","/**\r\n * Custom module for quilljs to allow user to resize <img> elements\r\n * (Works on Chrome, Edge, Safari and replaces Firefox's native resize behavior)\r\n * @see https://quilljs.com/blog/building-a-custom-module/\r\n */\r\n/*eslint-disable */\r\nexport class ImageResize {\r\n\r\n    constructor(quill, options = {}) {\r\n        // save the quill reference and options\r\n        this.quill = quill;\r\n        this.options = options;\r\n        // bind handlers to this instance\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleMousedown = this.handleMousedown.bind(this);\r\n        this.handleMouseup = this.handleMouseup.bind(this);\r\n        this.handleDrag = this.handleDrag.bind(this);\r\n        this.checkImage = this.checkImage.bind(this);\r\n        // track resize handles\r\n        this.boxes = [];\r\n        // disable native image resizing on firefox\r\n        document.execCommand('enableObjectResizing', false, 'false');\r\n        // respond to clicks inside the editor\r\n        this.quill.root.addEventListener('click', this.handleClick, false);\r\n    }\r\n\r\n    handleClick(evt) {\r\n        if (evt.target && evt.target.tagName && evt.target.tagName.toUpperCase() == 'IMG') {\r\n            if (this.img === evt.target) {\r\n                // we are already focused on this image\r\n                return;\r\n            }\r\n            if (this.img) {\r\n                // we were just focused on another image\r\n                this.hide();\r\n            }\r\n            // clicked on an image inside the editor\r\n            this.show(evt.target);\r\n        }\r\n        else if (this.img) {\r\n            // clicked on a non image\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    show(img) {\r\n        // keep track of this img element\r\n        this.img = img;\r\n        this.showResizers();\r\n        this.showSizeDisplay();\r\n        // position the resize handles at the corners\r\n        const rect = this.img.getBoundingClientRect();\r\n        this.positionBoxes(rect);\r\n        this.positionSizeDisplay(rect);\r\n    }\r\n\r\n    hide() {\r\n        this.hideResizers();\r\n        this.hideSizeDisplay();\r\n        this.img = undefined;\r\n    }\r\n\r\n    showResizers() {\r\n        // prevent spurious text selection\r\n        this.setUserSelect('none');\r\n        // add 4 resize handles\r\n        this.addBox('nwse-resize'); // top left\r\n        this.addBox('nesw-resize'); // top right\r\n        this.addBox('nwse-resize'); // bottom right\r\n        this.addBox('nesw-resize'); // bottom left\r\n        // listen for the image being deleted or moved\r\n        document.addEventListener('keyup', this.checkImage, true);\r\n        this.quill.root.addEventListener('input', this.checkImage, true);\r\n    }\r\n\r\n    hideResizers() {\r\n        // stop listening for image deletion or movement\r\n        document.removeEventListener('keyup', this.checkImage);\r\n        this.quill.root.removeEventListener('input', this.checkImage);\r\n        // reset user-select\r\n        this.setUserSelect('');\r\n        this.setCursor('');\r\n        // remove boxes\r\n        this.boxes.forEach(box => document.body.removeChild(box));\r\n        // release memory\r\n        this.dragBox = undefined;\r\n        this.dragStartX = undefined;\r\n        this.preDragWidth = undefined;\r\n        this.boxes = [];\r\n    }\r\n\r\n    addBox(cursor) {\r\n        // create div element for resize handle\r\n        const box = document.createElement('div');\r\n        // apply styles\r\n        const styles = {\r\n            position: 'absolute',\r\n            height: '12px',\r\n            width: '12px',\r\n            backgroundColor: 'white',\r\n            border: '1px solid #777',\r\n            boxSizing: 'border-box',\r\n            opacity: '0.80',\r\n            cursor: cursor,\r\n        };\r\n        this.extend(box.style, styles, this.options.handleStyles || {});\r\n        // listen for mousedown on each box\r\n        box.addEventListener('mousedown', this.handleMousedown, false);\r\n        // add drag handle to document\r\n        document.body.appendChild(box);\r\n        // keep track of drag handle\r\n        this.boxes.push(box);\r\n    }\r\n\r\n    extend(destination, ...sources) {\r\n        sources.forEach(source => {\r\n            for (let prop in source) {\r\n                if (source.hasOwnProperty(prop)) {\r\n                    destination[prop] = source[prop];\r\n                }\r\n            }\r\n        });\r\n        return destination;\r\n    }\r\n\r\n    positionBoxes(rect) {\r\n        // set the top and left for each drag handle\r\n        [\r\n            { left: rect.left - 6, top: rect.top - 6 },               // top left\r\n            { left: rect.left + rect.width - 6, top: rect.top - 6 },               // top right\r\n            { left: rect.left + rect.width - 6, top: rect.top + rect.height - 6 }, // bottom right\r\n            { left: rect.left - 6, top: rect.top + rect.height - 6 }, // bottom left\r\n        ].forEach((pos, idx) => {\r\n            this.extend(this.boxes[idx].style, {\r\n                top: Math.round(pos.top + window.pageYOffset) + 'px',\r\n                left: Math.round(pos.left + window.pageXOffset) + 'px',\r\n            });\r\n        });\r\n    }\r\n\r\n    handleMousedown(evt) {\r\n        // note which box\r\n        this.dragBox = evt.target;\r\n        // note starting mousedown position\r\n        this.dragStartX = evt.clientX;\r\n        // store the width before the drag\r\n        this.preDragWidth = this.img.width || this.img.naturalWidth;\r\n        // set the proper cursor everywhere\r\n        this.setCursor(this.dragBox.style.cursor);\r\n        // listen for movement and mouseup\r\n        document.addEventListener('mousemove', this.handleDrag, false);\r\n        document.addEventListener('mouseup', this.handleMouseup, false);\r\n    }\r\n\r\n    handleMouseup() {\r\n        // reset cursor everywhere\r\n        this.setCursor('');\r\n        // stop listening for movement and mouseup\r\n        document.removeEventListener('mousemove', this.handleDrag);\r\n        document.removeEventListener('mouseup', this.handleMouseup);\r\n    }\r\n\r\n    handleDrag(evt) {\r\n        if (!this.img) {\r\n            // image not set yet\r\n            return;\r\n        }\r\n        // update image size\r\n        if (this.dragBox == this.boxes[0] || this.dragBox == this.boxes[3]) {\r\n            // left-side resize handler; draging right shrinks image\r\n            this.img.width = Math.round(this.preDragWidth - evt.clientX - this.dragStartX);\r\n        }\r\n        else {\r\n            // right-side resize handler; draging right enlarges image\r\n            this.img.width = Math.round(this.preDragWidth + evt.clientX - this.dragStartX);\r\n        }\r\n        // reposition the drag handles around the image\r\n        const rect = this.img.getBoundingClientRect();\r\n        this.positionBoxes(rect);\r\n        this.positionSizeDisplay(rect);\r\n    }\r\n\r\n    setUserSelect(value) {\r\n        [\r\n            'userSelect',\r\n            'mozUserSelect',\r\n            'webkitUserSelect',\r\n            'msUserSelect'\r\n        ].forEach(prop => {\r\n            // set on contenteditable element and <html>\r\n            this.quill.root.style[prop] = value;\r\n            document.documentElement.style[prop] = value;\r\n        });\r\n    }\r\n\r\n    setCursor(value) {\r\n        [\r\n            document.body,\r\n            this.img,\r\n            this.quill.root\r\n        ].forEach(el => el.style.cursor = value);\r\n    }\r\n\r\n    checkImage() {\r\n        if (this.img) {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    showSizeDisplay() {\r\n        if (!this.options.displaySize) {\r\n            return;\r\n        }\r\n        this.display = document.createElement('div');\r\n        // apply styles\r\n        const styles = {\r\n            position: 'absolute',\r\n            font: '12px/1.0 Arial, Helvetica, sans-serif',\r\n            padding: '4px 8px',\r\n            textAlign: 'center',\r\n            backgroundColor: 'white',\r\n            color: '#333',\r\n            border: '1px solid #777',\r\n            boxSizing: 'border-box',\r\n            opacity: '0.80',\r\n            cursor: 'default',\r\n        };\r\n        this.extend(this.display.style, styles, this.options.displayStyles || {});\r\n        document.body.appendChild(this.display);\r\n    }\r\n\r\n    hideSizeDisplay() {\r\n        document.body.removeChild(this.display);\r\n        this.display = undefined;\r\n    }\r\n\r\n    positionSizeDisplay(rect) {\r\n        if (!this.display || !this.img) {\r\n            return;\r\n        }\r\n        const size = this.getCurrentSize();\r\n        this.display.innerHTML = size.join(' &times; ');\r\n        if (size[0] > 120 && size[1] > 30) {\r\n            // position on top of image\r\n            const dispRect = this.display.getBoundingClientRect();\r\n            this.extend(this.display.style, {\r\n                left: Math.round(rect.left + rect.width + window.pageXOffset - dispRect.width - 8) + 'px',\r\n                top: Math.round(rect.top + rect.height + window.pageYOffset - dispRect.height - 8) + 'px',\r\n            });\r\n        }\r\n        else {\r\n            // position off bottom right\r\n            this.extend(this.display.style, {\r\n                left: Math.round(rect.left + rect.width + window.pageXOffset + 8) + 'px',\r\n                top: Math.round(rect.top + rect.height + window.pageYOffset + 8) + 'px',\r\n            });\r\n        }\r\n    }\r\n\r\n    getCurrentSize() {\r\n        return [\r\n            this.img.width,\r\n            Math.round(this.img.width / this.img.naturalWidth * this.img.naturalHeight),\r\n        ];\r\n    }\r\n\r\n}\r\n/*eslint-ensable */\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ImageResize.js","<style scoped lang=\"scss\">\r\n#editor_container{\r\n\r\n}\r\n</style>\r\n<template>\r\n    <div id=\"editor_container\">\r\n        <quill-editor v-model=\"content\"\r\n            ref=\"myQuillEditor\"\r\n            :options=\"editorOption\"\r\n            @ready=\"onEditorReady($event)\"\r\n            @change=\"onEditorChange($event)\">\r\n        </quill-editor>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Quill from 'quill';\r\nimport { ImageResize }from '../utils/ImageResize';\r\nimport { quillEditor } from 'vue-quill-editor';\r\n\r\n\r\nQuill.register('modules/imageResize', ImageResize);\r\n\r\nexport default {\r\n    name: \"editor\",\r\n    props:{\r\n        html: {\r\n            type    :   String,\r\n            default :   ''\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            content: this.html,\r\n            editorOption: {\r\n                // some quill options\r\n                modules: {\r\n                    toolbar: [\r\n                        ['bold', 'italic', 'underline', 'strike'],\r\n                        ['blockquote', 'code-block'],\r\n                        [{ 'header': 1 }, { 'header': 2 }],\r\n                        [{ 'list': 'ordered' }, { 'list': 'bullet' }],\r\n                        [{ 'script': 'sub' }, { 'script': 'super' }],\r\n                        [{ 'indent': '-1' }, { 'indent': '+1' }],\r\n                        [{ 'direction': 'rtl' }],\r\n                        [{ 'size': ['small', false, 'large', 'huge'] }],\r\n                        [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\r\n                        [{ 'font': [] }],\r\n                        [{ 'color': [] }, { 'background': [] }],\r\n                        [{ 'align': [] }],\r\n                        ['clean'],\r\n                        ['link', 'image', 'video']\r\n                    ],\r\n                    imageResize: {\r\n                        displaySize: true\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        onEditorReady(event){\r\n\r\n        },\r\n        onEditorChange(event){\r\n            //console.log(event)\r\n        }\r\n    },\r\n    computed: {\r\n        editor() {\r\n            return this.$refs.myQuillEditor.quill\r\n        }\r\n    },\r\n    watch: {\r\n        html(newVal, oldVal){\r\n            this.content = newVal;\r\n        }\r\n    }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/editor.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"editor_container\"}},[_c('quill-editor',{ref:\"myQuillEditor\",attrs:{\"options\":_vm.editorOption},on:{\"ready\":function($event){_vm.onEditorReady($event)},\"change\":function($event){_vm.onEditorChange($event)}},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-3589745a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/editor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3589745a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./editor.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./editor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./editor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3589745a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./editor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3589745a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/editor.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}