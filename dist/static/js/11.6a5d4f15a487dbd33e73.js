webpackJsonp([11],{"+B5A":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("VKKs"),i={components:{},data:function(){return{time:new Date,visible:!1,userName:"",password:"",passwordAgain:"",clickType:""}},mounted:function(){},methods:{togglesight:function(t){this.$set(this.sightStatus,t,!this.sightStatus[t])},clearModal:function(){this.password="",this.passwordAgain="",this.userName=""},login:function(t){this.clickType=t,this.visible=!0},logout:function(t){var e=this;this.clickType=t,this.$ajax({method:"post",url:"/Interface/logout",data:{}}).then(function(t){switch(t.data.retcode){case 0:e.$store.commit("updateLoginStatus",{isLogin:!1,userInfo:null}),a.a.removeItem("userInfo");break;default:e.$Message.error(t.data.retmsg)}})},register:function(t){this.clickType=t,this.visible=!0},submit:function(t){var e=this;switch(t){case"login":this.userName.length>0&&this.password.length>0?this.$ajax({method:"post",url:"/Interface/login",data:{userName:this.userName,password:this.password}}).then(function(t){switch(t.data.retcode){case 0:e.visible=!1,e.clearModal();var s=t.data.retdata;s.token=t.data.retdata.token,s.expires=Date.now(),e.$store.commit("updateLoginStatus",{isLogin:!0,userInfo:s}),a.a.setItem({key:"userInfo",data:s});break;default:e.$Message.error(t.data.retmsg)}}):this.$Message.error("请完善登录信息！");break;case"register":this.userName.length>0&&this.password.length>0&&this.passwordAgain.length?this.passwordAgain!==this.password?this.$Message.error("输入的密码不一致！"):this.$ajax({method:"post",url:"/Interface/register",data:{userName:this.userName,password:this.password}}).then(function(t){switch(t.data.retcode){case 0:e.visible=!1,e.clearModal();var s=t.data.retdata;s.token=t.data.retdata.token,s.expires=Date.now(),e.$store.commit("updateLoginStatus",{isLogin:!0,userInfo:s}),a.a.setItem({key:"userInfo",data:s});break;default:e.$Message.error(t.data.retmsg)}}):this.$Message.error("请完善注册信息！")}}},computed:{isLogin:function(){return this.$store.getters.isLogin}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"websiteIndex"}},[s("div",{staticClass:"app_header"},[s("p",{staticClass:"app_time"},[t._v("今天是："+t._s(t._f("formatDate")(t.time,"dddd")))]),t._v(" "),s("a",{staticClass:"app_github",attrs:{href:"https://github.com/luguiqing"}},[t._v("github")])]),t._v(" "),s("div",{staticClass:"app_navbar"},[s("div",{staticClass:"navbar"},[s("a",{staticStyle:{display:"block",color:"#0090ce","font-family":"Comic Sans MS,cursive"},attrs:{href:"/"}},[t._v("River的博客系统")]),t._v(" "),s("div",{staticStyle:{"font-size":"0"}},[t.isLogin?s("router-link",{staticStyle:{"font-size":"14px","padding-right":"20px","vertical-align":"middle"},attrs:{to:{name:"omsUserArticleList"}}},[t._v("进入管理后台>>")]):t._e(),t._v(" "),t.isLogin?s("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.logout("logout")}}},[t._v("登出")]):t._e(),t._v(" "),t.isLogin?t._e():s("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.login("login")}}},[t._v("登录")]),t._v(" "),t.isLogin?t._e():s("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.register("register")}}},[t._v("注册")])],1)])]),t._v(" "),s("router-view"),t._v(" "),s("Modal",{attrs:{width:"460"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[s("p",{staticStyle:{"text-align":"center",color:"#0090ce","font-size":"20px"},attrs:{slot:"header"},slot:"header"},[t._v("用户"+t._s("register"===t.clickType?"注册":"登录"))]),t._v(" "),s("div",{staticStyle:{"text-align":"center",margin:"20px 0"}},[s("Input",{staticStyle:{width:"400px","margin-bottom":"20px"},attrs:{placeholder:"用户名",clearable:""},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),t._v(" "),s("Input",{staticStyle:{width:"400px"},attrs:{type:"password",placeholder:"密码",clearable:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),"register"===t.clickType?s("Input",{staticStyle:{width:"400px","margin-top":"20px"},attrs:{type:"password",placeholder:"确认密码",clearable:""},model:{value:t.passwordAgain,callback:function(e){t.passwordAgain=e},expression:"passwordAgain"}}):t._e()],1),t._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(e){t.submit(t.clickType)}}},[t._v(t._s("register"===t.clickType?"注册":"登录"))])],1)])],1)},staticRenderFns:[]};var o=s("Z0/y")(i,r,!1,function(t){s("WIP7")},"data-v-1fe45053",null);e.default=o.exports},WIP7:function(t,e){}});
//# sourceMappingURL=11.6a5d4f15a487dbd33e73.js.map